{"version":3,"sources":["components/maintenance/MaintenanceThree.js"],"names":["MaintenanceThree","props","onChange","e","target","name","value","setState","handleRate","a","rating","addNumbwe","showText","valueStar","state","messageRating","clear","sigPad","imgBLOB","trim","convertImageToBlob","SignatureName","suggestion","b64","onsuccess","onerror","img","Image","onload","canvas","document","createElement","width","height","getContext","drawImage","toBlob","src","imgs","this","getTrimmedCanvas","toDataURL","b64toBlob","blob","url","window","URL","createObjectURL","error","console","log","uploadImage","setTimeout","label","maxRating","icon","size","onRate","className","canvasProps","backgroundColor","ref","variant","onClick","color","sendDataThree","alt","Component"],"mappings":"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","file":"static/js/23.273c7b9a.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { MDBInput } from \"mdbreact\"\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Rating } from 'semantic-ui-react'\r\nimport SignaturePad from 'react-signature-canvas'\r\nimport './styles.module.sig.css'\r\n\r\nexport default class MaintenanceThree extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            SignatureName: ' ',\r\n            valueStar : ' ',\r\n            messageRating : 'โปรดประเมินการติดตั้ง',\r\n            suggestion : ' ',\r\n            imgBLOB : null\r\n        }\r\n    }\r\n\r\n    onChange = e => {\r\n      const { name, value } = e.target\r\n      this.setState({\r\n        [name]: value\r\n      })\r\n    }\r\n\r\n    handleRate = async (e, { rating }) =>{\r\n      await this.addNumbwe(e, { rating })\r\n            this.showText()\r\n    }\r\n  \r\n    addNumbwe = (e, { rating }) => {\r\n      this.setState({ valueStar : rating })\r\n    }\r\n  \r\n    showText = () =>{\r\n          switch (this.state.valueStar){\r\n            case 5 :\r\n              return this.setState({ messageRating : \"ประทับใจ\" })\r\n              break\r\n            case 4 :\r\n              return this.setState({ messageRating : \"ดีมาก\" }) \r\n              break\r\n            case 3 :\r\n              return this.setState({ messageRating : \"ดี\" }) \r\n              break\r\n            case 2 :\r\n              return this.setState({ messageRating : \"พอใช้\" }) \r\n              break\r\n            case 1 :\r\n              return this.setState({ messageRating : \"ต้องปรับปรุง\" }) \r\n              break\r\n            default:\r\n              return null\r\n          }\r\n    }\r\n\r\n    clear = () => {\r\n      this.sigPad.clear()\r\n      this.setState({\r\n        imgBLOB: null\r\n      })\r\n    }\r\n    trim = () => {\r\n      this.convertImageToBlob()\r\n    }\r\n\r\n    b64toBlob(b64, onsuccess, onerror) {\r\n      var img = new Image();\r\n      img.onerror = onerror;\r\n      img.onload = function onload() {\r\n          var canvas = document.createElement('canvas');\r\n          canvas.width = img.width;\r\n          canvas.height = img.height;\r\n          var ctx = canvas.getContext('2d');\r\n          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n          canvas.toBlob(onsuccess);\r\n      };\r\n      img.src = b64;\r\n    }\r\n\r\n  async  convertImageToBlob(){\r\n    var imgs = this.sigPad.getTrimmedCanvas().toDataURL('image/jpg')\r\n    await  this.b64toBlob( imgs ,\r\n        (blob) => {\r\n              var url = window.URL.createObjectURL(blob);\r\n              this.setState({ imgBLOB : url })\r\n        }, (error) => {\r\n            console.log(\"error = \"+error)\r\n        });\r\n    }\r\n\r\n    async  sendDataThree(){\r\n      await  this.trim()\r\n        console.log('SignatureName = '+ this.state.SignatureName)\r\n        console.log('valueStar = '+ this.state.valueStar)\r\n        console.log('suggestion = '+  this.state.suggestion)\r\n        this.uploadImage()\r\n        \r\n    }\r\n\r\n    uploadImage(){\r\n      setTimeout(() => {\r\n        console.log('img blob = '+ this.state.imgBLOB)\r\n      }, 500);\r\n    }\r\n\r\n    render () {\r\n      const { messageRating, imgBLOB} = this.state\r\n\r\n      return(\r\n        <div>\r\n\r\n        <form>\r\n          <MDBInput label=\"ชื่อผู้ดูแลสถานที่ติดตั้ง\" name=\"SignatureName\" onChange={this.onChange}/>\r\n        </form>\r\n          <br />\r\n          <div>\r\n          {messageRating}\r\n        </div>\r\n        <div>\r\n          <Rating maxRating={5} icon='star' size='massive' onRate={this.handleRate}/>\r\n        </div>\r\n        <form>\r\n        <MDBInput label=\"ข้อเสนอแนะ\" name=\"suggestion\" onChange={this.onChange}/>\r\n        </form>\r\n\r\n        <form>\r\n        <div className=\"container\">\r\n          <div className=\"sigContainer\">\r\n            <SignaturePad \r\n              canvasProps={{className: \"sigPad\"}}\r\n              backgroundColor = '#ffffcc'\r\n              ref={(ref) => { this.sigPad = ref }} \r\n            />\r\n          </div>\r\n        </div>\r\n        <br />\r\n          <div className=\"container-fluid\">\r\n            <Button variant=\"btn btn-block btn-warning\" onClick={() => this.clear()} color=\"primary\"> แก้ไขลายเซ็น </Button>{' '}\r\n          </div>\r\n        </form>\r\n        <br />\r\n          <div className=\"container-fluid\">\r\n            <Button variant=\"btn btn-block btn-success\" onClick={() => this.sendDataThree()} color=\"primary\"> ส่งชื่อ </Button>{' '}\r\n          </div>\r\n\r\n        <br />\r\n        <div className=\"container-fluid\">\r\n        { this.state.imgBLOB &&  ( <img  className=\"sigImage\" alt=\"signature\" src={imgBLOB} /> ) }\r\n        </div>\r\n        \r\n      </div>\r\n      )\r\n    }\r\n  }"],"sourceRoot":""}