(this.webpackJsonp2fast=this.webpackJsonp2fast||[]).push([[20],{45:function(e,t){e.exports.removeDataLocalStorage=function(){localStorage.removeItem("user"),localStorage.removeItem("user_id"),localStorage.removeItem("teamproject_ID")}},459:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var n=a(75),r=a.n(n),s=a(77),o=a(44),i=a(14),c=a(13),u=a(16),l=a(15),m=a(0),g=a.n(m),d=a(133),p=a(120),h=a(615),f=a(460),v=a.n(f),S=a(54),b=a.n(S),w=a(49),B=(a(463),a(47)),x=a(45),O=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(o.a)({},a,r))},n.handleRate=function(){var e=Object(s.a)(r.a.mark((function e(t,a){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.rating,e.next=3,n.addNumbwe(t,{rating:s});case 3:n.showText();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.addNumbwe=function(e,t){var a=t.rating;n.setState({valueStar:a})},n.showText=function(){switch(n.state.valueStar){case 5:return n.setState({messageRating:"\u0e1b\u0e23\u0e30\u0e17\u0e31\u0e1a\u0e43\u0e08"});case 4:return n.setState({messageRating:"\u0e14\u0e35\u0e21\u0e32\u0e01"});case 3:return n.setState({messageRating:"\u0e14\u0e35"});case 2:return n.setState({messageRating:"\u0e1e\u0e2d\u0e43\u0e0a\u0e49"});case 1:return n.setState({messageRating:"\u0e15\u0e49\u0e2d\u0e07\u0e1b\u0e23\u0e31\u0e1a\u0e1b\u0e23\u0e38\u0e07"});default:return null}},n.clear=function(){n.sigPad.clear(),n.setState({imgSignatureBLOB:null})},n.trim=function(){n.convertImageToBlob()},n.state={id:" ",locationToSetup:" ",imgBLOB:" ",problem:"\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e17\u0e35\u0e48\u0e1e\u0e1a\u0e40\u0e08\u0e2d\u0e02\u0e13\u0e30\u0e15\u0e34\u0e14\u0e15\u0e31\u0e49\u0e07",fixed:"\u0e27\u0e34\u0e18\u0e35\u0e41\u0e01\u0e49\u0e44\u0e02",message:null,SignatureName:"\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48\u0e15\u0e34\u0e14\u0e15\u0e31\u0e49\u0e07",valueStar:" ",messageRating:"\u0e42\u0e1b\u0e23\u0e14\u0e1b\u0e23\u0e30\u0e40\u0e21\u0e34\u0e19\u0e01\u0e32\u0e23\u0e15\u0e34\u0e14\u0e15\u0e31\u0e49\u0e07",suggestion:"\u0e02\u0e49\u0e2d\u0e40\u0e2a\u0e19\u0e2d\u0e41\u0e19\u0e30",imgSignatureBLOB:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=Object(w.a)())||this.props.history.push("/login"),b.a.get("".concat(B.getIP(),":3000/api/v1/posts"),{headers:{"x-access-token":t}}).then((function(e){e.data.rows[0].data[0].SignatureName&&e.data.rows[0].data[0].valueStar?a.setState({id:e.data.rows[0].id,locationToSetup:e.data.rows[0].data[0].locationToSetup,imgBLOB:e.data.rows[0].data[0].imgBLOB,problem:e.data.rows[0].data[0].problem,fixed:e.data.rows[0].data[0].fixed,SignatureName:e.data.rows[0].data[0].SignatureName,valueStar:e.data.rows[0].data[0].valueStar,messageRating:e.data.rows[0].data[0].messageRating,suggestion:e.data.rows[0].data[0].suggestion,imgSignatureBLOB:e.data.rows[0].data[0].imgSignatureBLOB}):a.setState({id:e.data.rows[0].id,locationToSetup:e.data.rows[0].data[0].locationToSetup,imgBLOB:e.data.rows[0].data[0].imgBLOB,problem:e.data.rows[0].data[0].problem,fixed:e.data.rows[0].data[0].fixed})})).catch((function(e){x.removeDataLocalStorage(),a.props.history.push("/login")}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"b64toBlob",value:function(e,t,a){var n=new Image;n.onerror=a,n.onload=function(){var e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0,e.width,e.height),e.toBlob(t)},n.src=e}},{key:"convertImageToBlob",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.sigPad.getTrimmedCanvas().toDataURL("image/jpg"),e.next=3,this.b64toBlob(t,(function(e){var t=window.URL.createObjectURL(e);a.setState({imgSignatureBLOB:t})}),(function(e){console.log("error = "+e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendDataThree",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.trim();case 2:return e.next=4,this.uploadImage();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadImage",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("teamproject_ID");case 2:return t=e.sent,e.next=5,Object(w.a)();case 5:(a=e.sent)||this.props.history.push("/login"),setTimeout((function(){b()({method:"put",url:"".concat(B.getIP(),":3000/api/v1/posts/").concat(n.state.id),headers:{"x-access-token":a},data:{project_pair_key:"".concat(t),data:{locationToSetup:"".concat(n.state.locationToSetup),imgBLOB:"".concat(n.state.imgBLOB),problem:"".concat(n.state.problem),fixed:"".concat(n.state.fixed),SignatureName:"".concat(n.state.SignatureName),valueStar:"".concat(n.state.valueStar),messageRating:"".concat(n.state.messageRating),suggestion:"".concat(n.state.suggestion),imgSignatureBLOB:"".concat(n.state.imgSignatureBLOB)}}}).then((function(e){n.setState({message:"\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"})})).catch((function(e){n.setState({message:"\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"})}))}),500);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showMessageUpload",value:function(){if(this.state.message)return"\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"===this.state.message?g.a.createElement("p",{style:{marginTop:"3px",color:"green"}},this.state.message):"\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"===this.state.message?g.a.createElement("p",{style:{marginTop:"3px",color:"red"}},this.state.message):g.a.createElement("p",{style:{marginTop:"3px",color:"red"}},"internet error")}},{key:"render",value:function(){var e=this,t=this.state,a=t.messageRating,n=t.imgSignatureBLOB;return g.a.createElement("div",null,g.a.createElement("form",null,g.a.createElement(d.i,{label:"".concat(this.state.SignatureName),name:"SignatureName",onChange:this.onChange})),g.a.createElement("br",null),g.a.createElement("div",null,a),g.a.createElement("div",null,g.a.createElement(h.a,{maxRating:5,icon:"star",size:"massive",onRate:this.handleRate})),g.a.createElement("form",null,g.a.createElement(d.i,{label:"".concat(this.state.suggestion),name:"suggestion",onChange:this.onChange})),g.a.createElement("form",null,g.a.createElement("div",{className:"container"},g.a.createElement("div",{className:"sigContainer"},g.a.createElement(v.a,{canvasProps:{className:"sigPad"},backgroundColor:"#ffffcc",ref:function(t){e.sigPad=t}}))),g.a.createElement("br",null),g.a.createElement("div",{className:"container-fluid"},g.a.createElement(p.a,{variant:"btn btn-block btn-warning",onClick:function(){return e.clear()},color:"primary"}," \u0e41\u0e01\u0e49\u0e44\u0e02\u0e25\u0e32\u0e22\u0e40\u0e0b\u0e47\u0e19 ")," ")),g.a.createElement("br",null),g.a.createElement("div",{className:"container-fluid"},g.a.createElement(p.a,{variant:"btn btn-block btn-success",onClick:function(){return e.sendDataThree()},color:"primary"}," \u0e2a\u0e48\u0e07\u0e0a\u0e37\u0e48\u0e2d ")," ",g.a.createElement("br",null),this.showMessageUpload()),g.a.createElement("br",null),g.a.createElement("div",{className:"container-fluid"},this.state.imgSignatureBLOB&&g.a.createElement("img",{className:"sigImage",alt:"signature",src:n})))}}]),a}(m.Component)},463:function(e,t,a){},47:function(e,t){e.exports.getIP=function(){return"http://54.254.61.44"}}}]);
//# sourceMappingURL=20.7cb70510.chunk.js.map